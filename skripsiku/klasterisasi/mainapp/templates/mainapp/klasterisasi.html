{% extends "mainapp/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<div class="col-md-12">

    <div class="card">
        <div class="card-header border-blue ch-alt" style="display: flex">
            <div style="margin-right: auto">
                <h4>Klasterisasi</h4>
            </div>

        </div>

        <div class="ch-widget" style="display: flex">
            <form method="POST">
                <div class="form-group" style="display: flex">
                    <div class="col-sm-6" style="margin-left:20px;">
                        {% csrf_token %}
                        {{ kecForm|crispy }}
                    </div>
                    <div class="col-sm-6" style="margin-left:auto;">
                        {% csrf_token %}
                        {{ bpForm|crispy }}
                    </div>
                    <div class="col-sm-6" style="margin-left:auto;">
                        <label for="jml_cluster">Jumlah Cluster</label>
                        <select class="select form-control" name="jmlCluster" id="jml_cluster">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                    <!-- <div class="col-sm-3" style="margin-left:auto">
                        <label for="id_cluster2">Pusat Cluster 2</label>
                        <select class="select form-control" name="cluster2" id="id_cluster2">
                            {% for data in dataAwal %}
                            <option value="{{ data }}">{{ data }}</option>
                            {% endfor %}
                        </select>
                    </div> -->

                    <div class="col-md-3 col-sm-3 col-xs-12 col-md-offset-3" style="margin-top:30px;">
                        <button class="btn btn-outline-info" type="submit">Proses</button>
                    </div>
                </div>
                <!-- <div class="form-group">
                    <div class="col-md-3 col-sm-3 col-xs-12 col-md-offset-3" style="margin-bottom:10px;">
                        <button class="btn btn-outline-info" type="submit">Post</button>
                    </div>
                </div> -->
            </form>
        </div>

        <div class="card-header border-blue ch-alt" style="display: flex">
            <div style="margin-right: auto">
                <h4>Data Awal</h4>
            </div>
        </div>

        <div class="table-responsive">
            <div class="dataTables_wrapper">
                <div class="datatable-scroll-wrap">
                    <table id="data-sekolah" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th style="text-align: center;">
                                    <h7>Nama Sekolah</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Guru (X1)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Kelas (X2)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Lab (X3)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Perpus (X4)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio PD:RB (X5)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio G:RB (X6)</h7>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for dataku in dataAwal %}
                            <tr style="white-space: nowrap">
                                <td>{{ dataku.namaSekolah }}</td>
                                <td>{{ dataku.guru }}</td>
                                <td>{{ dataku.rKelas }}</td>
                                <td>{{ dataku.rLab }}</td>
                                <td>{{ dataku.rPerpus }}</td>
                                <td>{{ dataku.rasioPDRB }}</td>
                                <td>{{ dataku.rasioGRB }}</td>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        {% if final1.count != 0 %}
        <div class="card-header border-blue ch-alt" style="display: flex">
            <div style="margin-right: auto">
                <h4>Klaster 1</h4>
            </div>
        </div>

        <div class="table-responsive">
            <div class="dataTables_wrapper">
                <div class="datatable-scroll-wrap">
                    <table id="data-klaster1" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th style="text-align: center;">
                                    <h7>Nama Sekolah</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Guru (X1)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Kelas (X2)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Lab (X3)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Perpus (X4)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio PD:RB (X5)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio G:RB (X6)</h7>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for claster1 in final1 %}
                            <tr style="white-space: nowrap">
                                <td>{{ claster1.namaSekolah }}</td>
                                <td>{{ claster1.X1 }}</td>
                                <td>{{ claster1.X2 }}</td>
                                <td>{{ claster1.X3 }}</td>
                                <td>{{ claster1.X4 }}</td>
                                <td>{{ claster1.X5 }}</td>
                                <td>{{ claster1.X6 }}</td>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <br></br>
        {% else %}
        {% endif %}

        {% if final2.count != 0 %}
        <div class="card-header border-blue ch-alt" style="display: flex">
            <div style="margin-right: auto">
                <h4>Klaster 2</h4>
            </div>
        </div>

        <div class="table-responsive">
            <div class="dataTables_wrapper">
                <div class="datatable-scroll-wrap">
                    <table id="data-klaster2" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th style="text-align: center;">
                                    <h7>Nama Sekolah</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Guru (X1)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Kelas (X2)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Lab (X3)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Perpus (X4)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio PD:RB (X5)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio G:RB (X6)</h7>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for claster2 in final2 %}
                            <tr style="white-space: nowrap">
                                <td>{{ claster2.namaSekolah }}</td>
                                <td>{{ claster2.X1 }}</td>
                                <td>{{ claster2.X2 }}</td>
                                <td>{{ claster2.X3 }}</td>
                                <td>{{ claster2.X4 }}</td>
                                <td>{{ claster2.X5 }}</td>
                                <td>{{ claster2.X6 }}</td>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        {% else %}
        {% endif %}

        {% if final3.count != 0 %}
        <div class="card-header border-blue ch-alt" style="display: flex">
            <div style="margin-right: auto">
                <h4>Klaster 3</h4>
            </div>
        </div>

        <div class="table-responsive">
            <div class="dataTables_wrapper">
                <div class="datatable-scroll-wrap">
                    <table id="data-klaster3" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th style="text-align: center;">
                                    <h7>Nama Sekolah</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Guru (X1)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Kelas (X2)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Lab (X3)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>R. Perpus (X4)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio PD:RB (X5)</h7>
                                </th>
                                <th style="text-align: center;">
                                    <h7>Rasio G:RB (X6)</h7>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for claster3 in final3 %}
                            <tr style="white-space: nowrap">
                                <td>{{ claster3.namaSekolah }}</td>
                                <td>{{ claster3.X1 }}</td>
                                <td>{{ claster3.X2 }}</td>
                                <td>{{ claster3.X3 }}</td>
                                <td>{{ claster3.X4 }}</td>
                                <td>{{ claster3.X5 }}</td>
                                <td>{{ claster3.X6 }}</td>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        {% else %}
        {% endif %}

    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.js"></script>

<!-- <script>
    // using jQuery get csrftoken from your HTML
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            // if not safe, set csrftoken
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });
    $(document).ready(function () {
        $("#id_pilihKecamatan").change(function () {
            var kecamatan = $(this).val();
            alert(kecamatan);
            $.ajax({
                url: '/klasterisasi',
                type: "post",
                data: kecamatan,
                dataType: 'json',
                success: function (data) {
                    alert("Success");
                }
            });
        });
    });
</script> -->

<script>
    $(document).ready(function () {
        $('#data-sekolah').DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            "scrollX": true
        });
    });
</script>
<!-- <script>
    $(document).ready(function () {
        $('#data-klaster1').DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            "scrollX": true
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#data-klaster2').DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            "scrollX": true
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#data-klaster3').DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            "scrollX": true
        });
    });
</script> -->

{% endblock content %}